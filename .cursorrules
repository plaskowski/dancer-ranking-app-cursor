# Dancer Ranking App - Cursor Rules

## Documentation Sync Rule
**CRITICAL**: Whenever you make changes to the implementation (code, UI, functionality, data models), you MUST also update the corresponding sections in the Implementation specification.md file.

### Always Update Specification For:
- **New features or functionality**: Add to relevant screen descriptions, navigation flow, key features
- **UI/UX changes**: Update screen descriptions, actions, navigation patterns
- **Data model changes**: Update database schema, relationships, workflow descriptions
- **Dialog/modal changes**: Update navigation flow and screen actions
- **Service method changes**: Update workflow descriptions and feature explanations
- **Tab behavior changes**: Update tab-specific actions and navigation flow
- **Context action additions**: Update actions lists and workflow steps

### Specification Sections to Consider:
- **Screens section**: Update affected screen descriptions and actions
- **Navigation Flow**: Update flowchart when navigation changes
- **Event Workflow**: Update workflow steps when user experience changes
- **Key Features**: Add new features or update existing feature descriptions
- **Database Schema**: Update when data models change

### Process:
1. Make implementation changes
2. Identify which specification sections are affected
3. Update the specification to match the new implementation
4. Ensure examples and workflow descriptions are accurate
5. Update navigation flow diagrams if needed

### Example Triggers:
- Adding new buttons or actions → Update screen actions
- Changing dialog content → Update navigation flow
- Adding new screens → Update navigation flow and screens section
- Modifying user workflow → Update event workflow section
- Adding database fields → Update schema section

## Code Quality Rules
- Use descriptive variable and method names
- Add comments for complex business logic
- Follow Flutter/Dart conventions
- Use proper error handling with user-friendly messages
- Implement loading states for async operations

## UI/UX Consistency
- Use consistent color schemes (blue for primary actions, green for success, red for errors)
- Provide visual feedback for user actions (snackbars, loading indicators)
- Follow Material Design principles
- Ensure accessibility with proper semantic labels

## Development Workflow Rules

### Const Expression Rule
**CRITICAL**: NEVER use `const` keyword in the build method because it changes back and forth

### Task Focus Rule
**CRITICAL**: Stay strictly focused on the current task. Do NOT make unrelated changes.
- Only modify files directly related to the current task
- Do not refactor unrelated code "while you're at it"
- Do not fix unrelated linter warnings unless they block the current task
- If you see opportunities for improvement, mention them but don't implement unless asked

### Auto-Formatting Rule
**ALWAYS** format modified Dart files using proper formatting:
- Use `dart format` on any Dart files you modify
- Ensure consistent indentation and style
- Run formatting automatically after making changes

### Linter Error Handling
- Fix linter errors directly related to your changes
- If const expression errors occur, immediately remove `const` keyword rather than trying to work around it

### Changelog & Commit Workflow Rule
**MANDATORY**: After implementing any improvement, feature, or fix, follow this exact sequence:
1. **Implement** the improvement (code changes, tests, documentation updates)
2. **Update Changelog.md** with version bump and clear summary:
   - Create new version section (e.g., `## [v0.9.0] - YYYY-MM-DD`)
   - Add "User Requests" section listing the user's messages that triggered this work
   - Use proper categorization: Added, Changed, Improved, Fixed, Technical
   - Include brief description of what was changed and why
3. **Update Implementation specification.md** if behavior changed:
   - Add new features to relevant screen descriptions and key features
   - Update navigation flow when UI/UX changes
   - Modify database schema documentation for data model changes
   - Ensure workflow descriptions match new implementation
4. **Update Next steps.md**:
   - Remove completed task from Upcoming Improvements section
   - Keep file clean and current with only remaining tasks
5. **Commit all changes** with concise message:
   - Use conventional commit format: `feat:`, `fix:`, `docs:`, `refactor:`, etc.
   - Keep message brief and focused (1-2 lines max)
   - Reference the version number
   - Include code changes, changelog, specification updates, and next steps cleanup in single commit

### Changelog Standards
- Follow [Keep a Changelog](https://keepachangelog.com/en/1.0.0/) format with immediate version bumping
- Create new version section for each development session
- Include "User Requests" section documenting what the user asked for
- Use semantic versioning (patch for fixes, minor for features, major for breaking changes)
- Include technical details in Technical section when relevant
- Cross-reference relevant files/components changed
